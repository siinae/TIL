#  전처리_결측치와 이상치 #





---

### 01.  기본 모듈 호출

```python
import pandas as pd
import numpy as np
from pandas as Series, DataFrame
```

---



---

### 02. 파일 불러오기

```python
pd.read_csv(sep='.',         # 필드 구분자
            header=None,     # default는 파일의 첫줄을 헤더로 읽음, 읽지 않을 경우 None
            skiprows=[0,3])  # 스킵할 행의 번호
-----------------------------------------------------------------------------------
pd.read_csv('./data/file1.txt')
df1 = pd.read_csv('./data/file1.txt')

     a   b   c   d
0    1   2   3   4
1    5   6   7   8
2    9  10  11  12
3    .  13  14  15
4   16  17  18  19
5  NaN  20  21  22
```

---



---

### 03. 결측치 처리

- 결측치
  - 잘못 들어온 값, 누락된 값
  - 처리방법: 삭제 또는 대치



- df1의 a컬럼의 결측치를 a컬럼의 최소값으로 대체 후 전체 평균 계산하기



```python
df1['a'].min()

#TypeError: '<=' not supported between instances of 'str' and 'float'
```

- 숫자형으로의 변환 필요



```python
df1['a'].astype('float')

#ValueError: could not convert string to float: '.'
```

- '.'값 때문에 숫자 변환 실패, 이러한 값을 확인하고 NaN값으로 변경하는 작업 필요



```python
df1['a'][df1['a'] == '.']

# 3    .
# Name: a, dtype: object
```

- '.' 값을  확인



```python
df1['a'][df1['a'] == '.'] = np.nan
df1

     a   b   c   d
0    1   2   3   4
1    5   6   7   8
2    9  10  11  12
3  NaN  13  14  15
4   16  17  18  19
5  NaN  20  21  22
```

- NaN값으로 변경, 이제 숫자 변환이 가능해짐



```python
df1['a'] = df1['a'].astype('float')
df1['a']
0     1.0
1     5.0
2     9.0
3     NaN
4    16.0
5     NaN
Name: a, dtype: float64
```

- 최소값을 구할 수 있게 됨



```python
df1['a'].min()

#1.0

vmin = df1['a'].min()
```

- 최소값 = 1.0, NaN값을 최소값으로 대체한 후, 평균을 계산하면 됨



```python
df1['a'].isnull()
0    False
1    False
2    False
3     True
4    False
5     True
Name: a, dtype: bool
#NaN값 확인


df1['a'][df1['a'].isnull()] = vmin

df1['a'].mean()
#5.5
```

---



---

### 04. 이상치 처리

- 이상치
  - outliers, 일반적인 범위를 벗어난 데이터를 의미
  - 처리방법: 삭제 또는 대치
  - 데이터마다 이상치에 대한 구간이 정의되어 있는 경우가 많음
  - 다양한 이상치 탐색기법이 존재하며, 가장 좋은 방법은 box plot을 이용하는 것임



- df1의 d컬럼 원소 중 16이상인 경우를 이상치로 볼 때, 이상치를 나머지 값들의 최대값으로 대체한 후 평균 계산하기



1. 이상치 확인

```python
df1['d']

0     4
1     8
2    12
3    15
4    19
5    22
Name: d, dtype: int64
--------------------------------------------------- 
df1['d'] >= 16
df1.d

0    False
1    False
2    False
3    False
4     True
5     True
Name: d, dtype: bool
---------------------------------------------------    
df1.d[df1['d'] >= 16]

4    19
5    22
Name: d, dtype: int64
```



2. 나머지값들의 최대값 구하기

```python
df1.d[df1.d < 16]

0     4
1     8
2    12
3    15
Name: d, dtype: int64
-----------------------------------
df1.d[df1.d < 16].max()
#15
-----------------------------------
df1.d[~(df1.d >= 16)]
df1.d[~(df1.d >= 16)].max() 
#위와 동일
-----------------------------------
vmax = df1.d[df1.d < 16].max()
```



3. 이상치를  앞서 구한 최대값으로 대체

```python
df1.d[df1.d >= 16] = vmax
```



4. 평균 구하기

```
df1.d.mean()
#11.5
```

---

